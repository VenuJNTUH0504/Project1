<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Functions</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.js"></script>
    <style>
        :root {
            --primary-bg: #f0f2f5;
            --text-color: #2c3e50;
            --card-bg: #ffffff;
            --hover-color: linear-gradient(145deg, #4ECDC4, #6BE5D9);
            --hover-shadow: rgba(78, 205, 196, 0.3);
            --code-bg: #f8f9fa;
            --code-border: #e9ecef;
        }

        .dark-theme {
            --primary-bg: #1a1a1a;
            --text-color: #ffffff;
            --card-bg: #2d2d2d;
            --hover-color: linear-gradient(145deg, #00B894, #00CEC9);
            --hover-shadow: rgba(0, 184, 148, 0.3);
            --code-bg: #2a2a2a;
            --code-border: #3a3a3a;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            transition: all 0.3s ease;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--hover-color);
            border-radius: 2px;
        }

        h2 {
            font-size: 1.8rem;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--code-border);
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.4rem;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        p {
            margin-bottom: 20px;
        }

        .code-block {
            background-color: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: monospace;
        }

        .example-section {
            margin-top: 30px;
            padding: 20px;
            background-color: var(--code-bg);
            border-radius: 10px;
        }

        .example-title {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .theme-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            background: var(--card-bg);
            border: none;
            color: var(--text-color);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .theme-switch:hover {
            background-image: var(--hover-color);
            color: white;
            transform: scale(1.05);
        }

        .back-button {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: var(--card-bg);
            color: var(--text-color);
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background-image: var(--hover-color);
            color: white;
            transform: translateX(-5px);
        }

        .note {
            background-color: rgba(255, 243, 205, 0.3);
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning {
            background-color: rgba(248, 215, 218, 0.3);
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .tip {
            background-color: rgba(209, 231, 221, 0.3);
            border-left: 4px solid #198754;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--code-border);
        }

        th {
            background-color: var(--code-bg);
        }

        .editor-container {
            margin: 20px 0;
        }

        .CodeMirror {
            height: auto;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <button class="theme-switch" onclick="toggleTheme()">Toggle Theme</button>
    <div class="container">
        <a href="javascript.html" class="back-button">‚Üê Back to JavaScript Home</a>
        
        <div class="header">
            <h1>JavaScript Functions</h1>
        </div>

        <section>
            <h2>What are Functions?</h2>
            <p>Functions are blocks of reusable code designed to perform a particular task. They allow you to structure your code, make it more readable, and avoid repetition.</p>
            
            <div class="note">
                <strong>Note:</strong> Functions are one of the fundamental building blocks in JavaScript. They are first-class objects, which means they can be passed around like any other value.
            </div>
        </section>

        <section>
            <h2>Function Declaration</h2>
            <p>There are several ways to define functions in JavaScript:</p>
            
            <h3>1. Function Declaration</h3>
            <div class="code-block">
                <pre>function greet(name) {
    return "Hello, " + name + "!";
}

// Call the function
console.log(greet("John")); // Outputs: Hello, John!</pre>
            </div>
            
            <h3>2. Function Expression</h3>
            <div class="code-block">
                <pre>const greet = function(name) {
    return "Hello, " + name + "!";
};

// Call the function
console.log(greet("John")); // Outputs: Hello, John!</pre>
            </div>
            
            <h3>3. Arrow Function (ES6)</h3>
            <div class="code-block">
                <pre>const greet = (name) => {
    return "Hello, " + name + "!";
};

// Shorter syntax for simple functions
const greetShort = name => "Hello, " + name + "!";

// Call the functions
console.log(greet("John")); // Outputs: Hello, John!
console.log(greetShort("Jane")); // Outputs: Hello, Jane!</pre>
            </div>
            
            <div class="tip">
                <strong>Best Practice:</strong> Use function declarations for main functions and arrow functions for short, simple operations or callbacks.
            </div>
        </section>

        <section>
            <h2>Function Parameters</h2>
            <p>Functions can take parameters (inputs) that are used inside the function.</p>
            
            <h3>Basic Parameters</h3>
            <div class="code-block">
                <pre>function add(a, b) {
    return a + b;
}

console.log(add(5, 3)); // Outputs: 8</pre>
            </div>
            
            <h3>Default Parameters (ES6)</h3>
            <div class="code-block">
                <pre>function greet(name = "Guest") {
    return "Hello, " + name + "!";
}

console.log(greet()); // Outputs: Hello, Guest!
console.log(greet("John")); // Outputs: Hello, John!</pre>
            </div>
            
            <h3>Rest Parameters (ES6)</h3>
            <div class="code-block">
                <pre>function sum(...numbers) {
    return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3, 4, 5)); // Outputs: 15
console.log(sum(10, 20)); // Outputs: 30</pre>
            </div>
        </section>

        <section>
            <h2>Return Statement</h2>
            <p>The <code>return</code> statement ends function execution and specifies a value to be returned to the function caller.</p>
            
            <div class="code-block">
                <pre>function multiply(a, b) {
    return a * b;
    // Code after return is not executed
    console.log("This will never be executed");
}

const result = multiply(4, 5);
console.log(result); // Outputs: 20</pre>
            </div>
            
            <p>If no return statement is specified, or if the return statement has no value, the function returns <code>undefined</code>.</p>
            
            <div class="code-block">
                <pre>function greet(name) {
    console.log("Hello, " + name + "!");
    // No return statement
}

const result = greet("John"); // Outputs: Hello, John!
console.log(result); // Outputs: undefined</pre>
            </div>
        </section>

        <section>
            <h2>Function Scope</h2>
            <p>Variables defined inside a function are not accessible from outside the function. They have function scope.</p>
            
            <div class="code-block">
                <pre>function myFunction() {
    const localVar = "I am local";
    console.log(localVar); // Accessible here
}

myFunction();
// console.log(localVar); // Error: localVar is not defined</pre>
            </div>
            
            <p>Functions can access variables defined in their outer scope (lexical scoping).</p>
            
            <div class="code-block">
                <pre>const outerVar = "I am from outer scope";

function myFunction() {
    console.log(outerVar); // Accessible here
}

myFunction(); // Outputs: I am from outer scope</pre>
            </div>
        </section>

        <section>
            <h2>Function Hoisting</h2>
            <p>Function declarations are hoisted to the top of their scope, which means they can be called before they are defined in the code.</p>
            
            <div class="code-block">
                <pre>// This works because of hoisting
console.log(add(5, 3)); // Outputs: 8

function add(a, b) {
    return a + b;
}</pre>
            </div>
            
            <div class="warning">
                <strong>Important:</strong> Function expressions and arrow functions are not hoisted in the same way. They can only be called after they are defined.
            </div>
            
            <div class="code-block">
                <pre>// This would cause an error
// console.log(subtract(5, 3)); // Error: subtract is not a function

const subtract = function(a, b) {
    return a - b;
};</pre>
            </div>
        </section>

        <section>
            <h2>Higher-Order Functions</h2>
            <p>Higher-order functions are functions that can take other functions as arguments or return functions as their result.</p>
            
            <h3>Functions as Arguments</h3>
            <div class="code-block">
                <pre>function calculate(operation, a, b) {
    return operation(a, b);
}

function add(a, b) {
    return a + b;
}

function multiply(a, b) {
    return a * b;
}

console.log(calculate(add, 5, 3)); // Outputs: 8
console.log(calculate(multiply, 5, 3)); // Outputs: 15</pre>
            </div>
            
            <h3>Functions Returning Functions</h3>
            <div class="code-block">
                <pre>function createMultiplier(factor) {
    return function(number) {
        return number * factor;
    };
}

const double = createMultiplier(2);
const triple = createMultiplier(3);

console.log(double(5)); // Outputs: 10
console.log(triple(5)); // Outputs: 15</pre>
            </div>
        </section>

        <section>
            <h2>Closures</h2>
            <p>A closure is the combination of a function and the lexical environment within which that function was declared. This allows a function to access variables from its outer scope even after the outer function has finished executing.</p>
            
            <div class="code-block">
                <pre>function createCounter() {
    let count = 0;
    
    return function() {
        count++;
        return count;
    };
}

const counter = createCounter();
console.log(counter()); // Outputs: 1
console.log(counter()); // Outputs: 2
console.log(counter()); // Outputs: 3</pre>
            </div>
            
            <p>In this example, the inner function maintains access to the <code>count</code> variable even after <code>createCounter</code> has finished executing.</p>
        </section>

        <section>
            <h2>Immediately Invoked Function Expressions (IIFE)</h2>
            <p>An IIFE is a function that is executed immediately after it is created.</p>
            
            <div class="code-block">
                <pre>(function() {
    console.log("This function is executed immediately");
})();

// With parameters
(function(name) {
    console.log("Hello, " + name + "!");
})("John");</pre>
            </div>
            
            <p>IIFEs are often used to create a private scope for variables, preventing them from polluting the global scope.</p>
        </section>

        <section>
            <h2>Interactive Examples</h2>
            
            <h3>Example 1: Basic Function Usage</h3>
            <div class="editor-container">
                <textarea id="editor1">
// Function declaration
function greet(name) {
    return "Hello, " + name + "!";
}

// Function expression
const sayGoodbye = function(name) {
    return "Goodbye, " + name + "!";
};

// Arrow function
const introduce = (name, age) => {
    return `My name is ${name} and I am ${age} years old.`;
};

// Using the functions
console.log(greet("Alice"));
console.log(sayGoodbye("Bob"));
console.log(introduce("Charlie", 30));

// Function with default parameters
function welcome(name = "Guest", greeting = "Welcome") {
    return `${greeting}, ${name}!`;
}

console.log(welcome());
console.log(welcome("David"));
console.log(welcome("Eve", "Howdy"));
</textarea>
            </div>
            
            <h3>Example 2: Higher-Order Functions</h3>
            <div class="editor-container">
                <textarea id="editor2">
// Higher-order function that takes a function as an argument
function applyOperation(a, b, operation) {
    return operation(a, b);
}

// Functions to pass as arguments
const add = (x, y) => x + y;
const subtract = (x, y) => x - y;
const multiply = (x, y) => x * y;
const divide = (x, y) => x / y;

// Using the higher-order function
console.log("5 + 3 =", applyOperation(5, 3, add));
console.log("5 - 3 =", applyOperation(5, 3, subtract));
console.log("5 * 3 =", applyOperation(5, 3, multiply));
console.log("5 / 3 =", applyOperation(5, 3, divide));

// Higher-order function that returns a function
function createGreeter(greeting) {
    return function(name) {
        return `${greeting}, ${name}!`;
    };
}

const sayHello = createGreeter("Hello");
const sayHi = createGreeter("Hi");

console.log(sayHello("Alice"));
console.log(sayHi("Bob"));
</textarea>
            </div>
            
            <h3>Example 3: Closures and Scope</h3>
            <div class="editor-container">
                <textarea id="editor3">
// Closure example: Counter
function createCounter() {
    let count = 0;
    
    return {
        increment: function() {
            count++;
            return count;
        },
        decrement: function() {
            count--;
            return count;
        },
        getValue: function() {
            return count;
        }
    };
}

const counter = createCounter();
console.log("Initial value:", counter.getValue());
console.log("After increment:", counter.increment());
console.log("After increment:", counter.increment());
console.log("After decrement:", counter.decrement());
console.log("Final value:", counter.getValue());

// Closure example: Private variables
function createPerson(name, age) {
    // Private variables
    let _name = name;
    let _age = age;
    
    // Public interface
    return {
        getName: function() {
            return _name;
        },
        getAge: function() {
            return _age;
        },
        setName: function(newName) {
            if (typeof newName === 'string' && newName.length > 0) {
                _name = newName;
            }
        },
        setAge: function(newAge) {
            if (typeof newAge === 'number' && newAge > 0) {
                _age = newAge;
            }
        },
        getInfo: function() {
            return `${_name} is ${_age} years old.`;
        }
    };
}

const person = createPerson("John", 30);
console.log(person.getInfo());
person.setName("Jane");
person.setAge(25);
console.log(person.getInfo());
</textarea>
            </div>
        </section>
    </div>

    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
        }

        // Initialize CodeMirror editors
        let editor1 = CodeMirror.fromTextArea(document.getElementById("editor1"), {
            mode: "javascript",
            theme: "dracula",
            lineNumbers: true,
            readOnly: false
        });

        let editor2 = CodeMirror.fromTextArea(document.getElementById("editor2"), {
            mode: "javascript",
            theme: "dracula",
            lineNumbers: true,
            readOnly: false
        });

        let editor3 = CodeMirror.fromTextArea(document.getElementById("editor3"), {
            mode: "javascript",
            theme: "dracula",
            lineNumbers: true,
            readOnly: false
        });
    </script>
</body>
</html>